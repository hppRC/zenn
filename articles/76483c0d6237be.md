---
title: "Rust ã® tokio, reqwest ã‚’åˆ©ç”¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«"
emoji: "ðŸ“š"
type: "tech"
topics: ["rust"]
published: true
---

ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã¨ã‚ã‹ã‚‹ã€‚
éžåŒæœŸAPIã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€é©å®œ`await`ã—ã¦ãã ã•ã„ã€‚
ã‚¨ãƒ©ãƒ¼å‘¨ã‚Šã¯ä¾¿åˆ©ãªã®ã§`anyhow`ã‚’åˆ©ç”¨ã€‚

```rust
use anyhow::Result;
use std::fs::File;
use std::io;

#[tokio::main]
async fn main() -> Result<()> {
    let url = "https://pbs.twimg.com/profile_images/1058802892415455233/_Fat5vje_400x400.jpg";
    let filename = url.split("/").last().unwrap();
    let response: reqwest::Response = reqwest::get(url).await?;
    let bytes = response.bytes().await?;
    let mut out = File::create(filename)?;
    io::copy(&mut bytes.as_ref(), &mut out)?;

    Ok(())
}
```
